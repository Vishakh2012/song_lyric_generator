{% extends "base.html" %}

{% block content %}

<form method="POST" action = "/submit">
    <div style="display: flex; align-items: center; justify-content: center; width: 50vw; height: 75vh;">
      <div class="form-group w-75">
        <label for="formGroupExampleInput" class="mb-2">enter lyrical prompt</label>
        <input type="text" class="form-control w-100" id="formGroupExampleInput" placeholder="I love you baby" name = "lyrics">
        <button type="submit" class="btn btn-dark mt-4">submit</button>
      </div>  
    </div>
  </form>
  <div id="poem"class = "d-none">
    {{lyrics}}
  </div>

  <div id="output" style="display: flex;flex-direction: column;  align-items: center; justify-content: center; width: 75vw;margin-right: auto;margin-left: auto;"></div>

  <script>
    // Access the Jinja variable in JavaScript
    const poemElement = document.getElementById("poem");
    const poem = poemElement.innerText;

    // Split the poem into words
    const words = poem.split(" ");

    // Create an empty array to store the lines
    const lines = [];

    // Generate the lines of the poem
    for (let i = 0; i < words.length; i += 8) {
      const line = words.slice(i, i + 8).join(" ");
      lines.push(line);
    }

    // Get the output element
    const outputElement = document.getElementById("output");

    // Display the lines on the webpage
    lines.forEach((line) => {
      const paragraph = document.createElement("p");
      paragraph.textContent = line;
      outputElement.appendChild(paragraph);
    });
  </script>
{% endblock %}